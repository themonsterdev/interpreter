<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Interprèteur: Interpreter (patron de conception)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Interprèteur<span id="projectnumber">&#160;2.0.0</span>
   </div>
   <div id="projectbrief">Compiler avec c++</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Généré par Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Recherche','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Recherche');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('interpreter.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title"><a class="el" href="class_interpreter.html">Interpreter</a> (patron de conception) </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >En <a href="https://fr.wikipedia.org/wiki/G%C3%A9nie_logiciel">génie logiciel</a>, le <b>patron de conception interpréteur</b> est un <a href="https://fr.wikipedia.org/wiki/Patron_de_conception">patron de conception</a> qui spécifie comment évaluer des phrases dans un <a href="https://fr.wikipedia.org/wiki/Langage_de_programmation">langage</a>.</p>
<p >L'idée de base est d'avoir une <a href="https://en.wikipedia.org/wiki/Class_(computer_programming)">classe</a> pour chaque symbole (<a href="https://en.wikipedia.org/wiki/Terminal_and_nonterminal_symbols">terminal</a> ou <a href="https://en.wikipedia.org/wiki/Terminal_and_nonterminal_symbolsl">non terminal</a>) dans un <a href="https://en.wikipedia.org/wiki/Domain-specific_language">langage informatique spécialisé</a>.</p>
<p >L'<a href="https://fr.wikipedia.org/wiki/Arbre_syntaxique">arbre syntaxique</a> d'une phrase dans le langage est une instance du <a href="https://en.wikipedia.org/wiki/Composite_pattern">modèle composite</a> et est utilisé pour <b>évaluer/interpréter</b> la phrase pour un client.</p>
<h1><a class="anchor" id="autotoc_md0"></a>
Introduction</h1>
<p >Le patron de conception <b><a class="el" href="class_interpreter.html">Interpreter</a></b> est l'un des vingt-trois <a href="https://en.wikipedia.org/wiki/Design_Patterns">patron de conception GoF</a> bien connus qui décrivent comment résoudre des problèmes de conception récurrents pour concevoir des logiciels orientés objet flexibles et réutilisables, c'est-à-dire des objets plus faciles à mettre en œuvre, à modifier, tester et réutiliser.</p>
<h2><a class="anchor" id="autotoc_md1"></a>
Quels problèmes le design pattern Interpreter peut-il résoudre ?</h2>
<ul>
<li>Analyser/<a href="https://fr.wikipedia.org/wiki/Analyse_syntaxique">parser</a> une chaîne algébrique. C'est un cas assez évident où le logiciel doit exécuter des opérations en fonction d'une équation (dessiner la courbe d'une fonction par exemple).</li>
<li>lorsque le logiciel doit produire différents types de données comme résultat. Ce cas est moins évident, mais l'interpréteur y est très utile. Prenez l'exemple d'un logiciel capable d'afficher des données dans n'importe quel ordre, en les triant ou pas, etc.</li>
</ul>
<p >Une <a href="https://en.wikipedia.org/wiki/Backus%E2%80%93Naur_form">grammaire</a> pour le langage doit être définie afin que les phrases de la langue puissent être interprétées.</p>
<p >Lorsqu'un problème survient très souvent, il peut être envisagé de le représenter sous la forme d'une phrase dans un langage simple ( <a href="https://en.wikipedia.org/wiki/Domain-specific_language">Domain Specific Languages</a> ) afin qu'un interpréteur puisse résoudre le problème en interprétant la phrase.</p>
<p >Par exemple, lorsque de nombreuses expressions de recherche différentes ou complexes doivent être spécifiées. Leur implémentation (câblage matériel) directement dans une classe est inflexible car elle engage la classe dans des expressions particulières et rend impossible la spécification de nouvelles expressions ou la modification d'expressions existantes indépendamment (sans avoir à modifier) ​ la classe.</p>
<h2><a class="anchor" id="autotoc_md2"></a>
Quelle solution le modèle de conception Interpreter décrit-il ?</h2>
<ul>
<li>Définir une grammaire pour un langage en définissant une <a class="el" href="class_expression.html">Expression</a> hiérarchie de classes et en implémentant une opération interpret().</li>
<li>Représenter une phrase dans le langage par un <a href="https://fr.wikipedia.org/wiki/Arbre_de_la_syntaxe_abstraite">arbre de syntaxe abstraite (AST)</a> composé instances d'<a class="el" href="class_expression.html">Expression</a>.</li>
<li>Interpréter une phrase en faisant appel à <code>interpret()</code> de l'AST.</li>
</ul>
<p >Les objets d'expression sont composés de manière récursive dans une structure composite/arborescente appelée <a href="https://fr.wikipedia.org/wiki/Arbre_de_la_syntaxe_abstraite">arbre de syntaxe abstraite</a> (voir <a href="https://en.wikipedia.org/wiki/Composite_pattern">Modèle composite</a> ).</p>
<p >Le patron de conception <b><a class="el" href="class_interpreter.html">Interpreter</a></b> ne décrit pas comment construire un <a href="https://fr.wikipedia.org/wiki/Arbre_de_la_syntaxe_abstraite">arbre de syntaxe abstraite</a>. Cela peut être fait manuellement par un client ou automatiquement par un <a href="https://en.wikipedia.org/wiki/Parsing#Parser">analyseur</a>.</p>
<h2><a class="anchor" id="autotoc_md3"></a>
Diagramme</h2>
<h3><a class="anchor" id="autotoc_md4"></a>
Patron de conception Interpreter</h3>
<div class="plantumlgraph">
<img src="inline_umlgraph_1.png" />
</div>
<p >Dans le <a href="https://en.wikipedia.org/wiki/Unified_Modeling_Language">diagramme de classes UML</a> ci-dessus:</p>
<ul>
<li>La classe Client fait référence à l'interface commune <a class="el" href="class_expression.html">Expression</a> pour interpréter une expression.</li>
<li>La classe <a class="el" href="class_terminal_expression.html">TerminalExpression</a> n'a pas d'enfants et interprète directement une expression.</li>
<li>La classe <a class="el" href="class_non_terminal_expression.html">NonTerminalExpression</a> maintient un conteneur d'expressions enfants et transmet les requêtes d' interprétation à ces derniers expressions. <br  />
</li>
</ul>
<h3><a class="anchor" id="autotoc_md5"></a>
Arbre de syntaxe abstraite</h3>
<div class="plantumlgraph">
<img src="inline_umlgraph_2.png" />
</div>
<p >Dans le <a href="https://en.wikipedia.org/wiki/Unified_Modeling_Language">Diagramme de collaboration d'objet UML</a> ci-dessus:</p>
<p >Les objets montre les interactions d'exécution :</p>
<ul>
<li>L'objet Client envoie une demande d'interprétation à l'<a href="https://fr.wikipedia.org/wiki/Arbre_de_la_syntaxe_abstraite">arbre de syntaxe abstraite</a>.</li>
<li>La requête est transmise à tous les objets en bas de l'arborescence. <br  />
</li>
<li>Les objets <a class="el" href="class_non_terminal_expression.html">NonTerminalExpression</a> (<a class="el" href="class_addition_expression.html">AdditionExpression</a>, <a class="el" href="class_multiplication_expression.html">MultiplicationExpression</a>) transmettent la requête à leurs expressions enfants. <br  />
</li>
<li>Les objets <a class="el" href="class_terminal_expression.html">TerminalExpression</a> (NumberExpression1, NumberExpression2, ...) effectuent directement l'interprétation.</li>
</ul>
<h1><a class="anchor" id="autotoc_md6"></a>
Exemple</h1>
<h2><a class="anchor" id="autotoc_md7"></a>
BNF</h2>
<p >L'exemple de formulaire Backus-Naur suivant illustre le modèle d'interprétation.</p>
<p >La grammaire:</p>
<div class="fragment"><div class="line">expression ::= plus | moins | variable | nombre </div>
<div class="line">plus ::= expression expression &#39;+&#39; </div>
<div class="line">moins ::= expression expression &#39;-&#39; </div>
<div class="line">variable ::= &#39;a&#39; | &#39;b&#39; | &#39;c&#39; | ... | </div>
<div class="line">chiffre &#39;z&#39; = &#39;0&#39; | &#39;1&#39; | ... | &#39;9&#39; </div>
<div class="line">nombre ::= chiffre | nombre Digital</div>
</div><!-- fragment --><p >définit une langue qui contient des expressions de notation polonaise inversée telles que :</p>
<div class="fragment"><div class="line">ab + </div>
<div class="line">abc + - </div>
<div class="line">ab + ca - -</div>
</div><!-- fragment --><p >En suivant le modèle de l'interpréteur, nous devons implémenter l'interface <a class="el" href="class_expression.html">Expression</a> pour chaque règle de grammaire.</p>
<h2><a class="anchor" id="autotoc_md8"></a>
Java</h2>
<p >L'exemple Java suivant montre comment interpréter un langage spécialisé, tel que les expressions en notation polonaise inversée. Dans ce langage, on donne les opérandes avant l'opérateur.</p>
<div class="fragment"><div class="line"><span class="keyword">import</span> java.util.*;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">interface </span><a class="code hl_class" href="class_expression.html">Expression</a></div>
<div class="line">{</div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">void</span> interpret(Stack&lt;Integer&gt; s);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>TerminalExpression_Number <span class="keyword">implements</span> <a class="code hl_class" href="class_expression.html">Expression</a></div>
<div class="line">{</div>
<div class="line">    <span class="keyword">private</span> <span class="keywordtype">int</span> number;</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">public</span> TerminalExpression_Number(<span class="keywordtype">int</span> number)</div>
<div class="line">    { this.number = number; }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">void</span> interpret(Stack&lt;Integer&gt; s)</div>
<div class="line">    { s.push(number); }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>NonTerminalExpression_Plus <span class="keyword">implements</span> <a class="code hl_class" href="class_expression.html">Expression</a></div>
<div class="line">{</div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">void</span> interpret(Stack&lt;Integer&gt; s)</div>
<div class="line">    { s.push( s.pop() + s.pop() ); }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>NonTerminalExpression_Minus <span class="keyword">implements</span> <a class="code hl_class" href="class_expression.html">Expression</a></div>
<div class="line">{</div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">void</span> interpret(Stack&lt;Integer&gt; s)</div>
<div class="line">    { s.push( - s.pop() + s.pop() ); }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span><a class="code hl_class" href="class_parser.html">Parser</a></div>
<div class="line">{</div>
<div class="line">    <span class="keyword">private</span> ArrayList&lt;Expression&gt; parseTree =</div>
<div class="line">        <span class="keyword">new</span> ArrayList&lt;Expression&gt;(); <span class="comment">// only one NonTerminal Expression here</span></div>
<div class="line"> </div>
<div class="line">    <span class="keyword">public</span> <a class="code hl_class" href="class_parser.html">Parser</a>(String s) {</div>
<div class="line">        </div>
<div class="line">        <a class="code hl_class" href="class_expression.html">Expression</a> plus = <span class="keyword">new</span> NonTerminalExpression_Plus();</div>
<div class="line">        <a class="code hl_class" href="class_expression.html">Expression</a> minus = <span class="keyword">new</span> NonTerminalExpression_Minus();</div>
<div class="line">        </div>
<div class="line">        <span class="keywordflow">for</span> (String token : s.split(<span class="stringliteral">&quot; &quot;</span>)) {</div>
<div class="line">            <span class="keywordflow">if</span> (token.equals(<span class="stringliteral">&quot;+&quot;</span>))</div>
<div class="line">                parseTree.add(plus);</div>
<div class="line">            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (token.equals(<span class="stringliteral">&quot;-&quot;</span>))</div>
<div class="line">                parseTree.add(minus);</div>
<div class="line">            <span class="comment">// ...</span></div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">                parseTree.add(<span class="keyword">new</span> TerminalExpression_Number(Integer.parseInt(token)));</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">int</span> evaluate()</div>
<div class="line">    {</div>
<div class="line">        Stack&lt;Integer&gt; context = <span class="keyword">new</span> Stack&lt;Integer&gt;();</div>
<div class="line">        <span class="keywordflow">for</span> (<a class="code hl_class" href="class_expression.html">Expression</a> e : parseTree) e.interpret(context);</div>
<div class="line">        <span class="keywordflow">return</span> context.pop();</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">public</span> <span class="keyword">class </span><a class="code hl_class" href="class_interpreter.html">Interpreter</a></div>
<div class="line">{</div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> main(String[] args)</div>
<div class="line">    {</div>
<div class="line">        String expression = args[0];</div>
<div class="line">        <a class="code hl_class" href="class_parser.html">Parser</a> p = <span class="keyword">new</span> <a class="code hl_class" href="class_parser.html">Parser</a>(expression);</div>
<div class="line">        System.out.println(<span class="stringliteral">&quot;&#39;&quot;</span> + expression +<span class="stringliteral">&quot;&#39; equals &quot;</span> + p.evaluate());</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="aclass_expression_html"><div class="ttname"><a href="class_expression.html">Expression</a></div><div class="ttdef"><b>Definition:</b> Expression.h:19</div></div>
<div class="ttc" id="aclass_interpreter_html"><div class="ttname"><a href="class_interpreter.html">Interpreter</a></div><div class="ttdef"><b>Definition:</b> Interpreter.h:24</div></div>
<div class="ttc" id="aclass_parser_html"><div class="ttname"><a href="class_parser.html">Parser</a></div><div class="ttdef"><b>Definition:</b> Parser.h:12</div></div>
</div><!-- fragment --><p >Ce programme affiche :</p>
<div class="fragment"><div class="line">&#39;42 4 2 - +&#39; equals 44</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md9"></a>
Références</h1>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Interpreter_pattern">Interpreter pattern</a> </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="pattern.html">Patron de conception</a></li>
    <li class="footer">Généré le Mardi 28 Décembre 2021 07:14:02 pour Interprèteur par <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
